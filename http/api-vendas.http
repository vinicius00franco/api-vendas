@baseUrl = http://localhost:3000
@authToken = {{authToken}}

### Auth - Login (sets {{authToken}})
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "admin@email.com",
  "password": "123456"
}

> {% 
  client.test("store auth token", function() {
    const body = response.body;
    client.assert(body && body.data && body.data.token, "Token não retornado em data.token");
    client.global.set("authToken", body.data.token);
  });
%}

### Users
POST {{baseUrl}}/users
Content-Type: application/json

{
  "name": "João Silva",
  "email": "joao@email.com",
  "admin": false,
  "password": "123456"
}

###
PUT {{baseUrl}}/users/1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "name": "João Santos",
  "email": "joao.santos@email.com",
  "admin": true,
  "password": "newpass"
}

###
PATCH {{baseUrl}}/users/1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "admin": true
}

###
DELETE {{baseUrl}}/users/1
Authorization: Bearer {{authToken}}

### Products
POST {{baseUrl}}/products
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "name": "Notebook Dell",
  "ean": "7891234567890",
  "price": 2500.00,
  "description": "Notebook Dell Inspiron",
  "categoryId": 1
}

###
PUT {{baseUrl}}/products/1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "name": "Notebook Dell XPS",
  "ean": "7891234567890",
  "price": 3500.00,
  "description": "Notebook Dell XPS 13",
  "categoryId": 1
}

###
PATCH {{baseUrl}}/products/1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "price": 3000.00
}

###
DELETE {{baseUrl}}/products/1
Authorization: Bearer {{authToken}}

### Categories
POST {{baseUrl}}/categories
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "name": "Eletrônicos",
  "description": "Produtos eletrônicos"
}

###
PUT {{baseUrl}}/categories/1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "name": "Informática",
  "description": "Produtos de informática"
}

###
PATCH {{baseUrl}}/categories/1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "description": "Equipamentos de informática"
}

###
DELETE {{baseUrl}}/categories/1
Authorization: Bearer {{authToken}}

### Sales
POST {{baseUrl}}/sales
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "value": 2500.00,
  "discount": 100.00,
  "productId": 1,
  "clientId": 1
}

###
PUT {{baseUrl}}/sales/1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "value": 3000.00,
  "discount": 200.00,
  "productId": 1,
  "clientId": 1
}

###
PATCH {{baseUrl}}/sales/1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "discount": 150.00
}

###
DELETE {{baseUrl}}/sales/1
Authorization: Bearer {{authToken}}

### Clients
POST {{baseUrl}}/clients
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "name": "Maria Silva",
  "document": "12345678901",
  "email": "maria@email.com",
  "phone": "+55 11 99999-9999",
  "address": {
    "street": "Rua das Flores",
    "number": "123",
    "city": "São Paulo",
    "state": "SP",
    "postalCode": "01234-567",
    "country": "BR"
  }
}

###
PUT {{baseUrl}}/clients/1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "name": "Maria Santos",
  "document": "12345678901",
  "email": "maria.santos@email.com",
  "address": {
    "street": "Av. Paulista",
    "number": "456",
    "city": "São Paulo",
    "state": "SP",
    "postalCode": "01310-100",
    "country": "BR"
  }
}

###
PATCH {{baseUrl}}/clients/1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "email": "maria.nova@email.com"
}

###
DELETE {{baseUrl}}/clients/1
Authorization: Bearer {{authToken}}

### Notas
# As respostas agora seguem o envelope padrão:
#   Sucesso: { "data": {...}, "message?": string, "meta?": { ... } }
#   Erro:    { "message": string, "code": string, "details?": any }